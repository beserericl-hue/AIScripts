# =============================================================================
# CSHSE Server Environment Variables
# =============================================================================
# Copy this file to .env and configure for your environment
# For Railway deployment, set these in the Railway dashboard under Variables

# =============================================================================
# Server Configuration
# =============================================================================

# Port the server listens on (Railway sets this automatically)
PORT=8080

# Environment mode: development, production, test
NODE_ENV=production

# =============================================================================
# Database Configuration
# =============================================================================

# MongoDB connection string
# For Railway: Use the MongoDB plugin or provide Atlas connection string
# Format: mongodb+srv://<username>:<password>@<cluster>.mongodb.net/<database>
MONGODB_URI=mongodb://localhost:27017/cshse

# For Docker deployment:
# MONGODB_URI=mongodb://admin:password@mongodb:27017/cshse?authSource=admin

# =============================================================================
# Authentication
# =============================================================================

# JWT Secret Key for signing authentication tokens
# IMPORTANT: Generate a strong random string for production (min 32 characters)
# Example: openssl rand -base64 32
# Note: Tokens expire after 30 days (hardcoded for user convenience)
JWT_SECRET=your-secure-jwt-secret-key-change-in-production

# =============================================================================
# Superuser Account (Created on First Deployment)
# =============================================================================

# Full name of the superuser (will be parsed into first/last name)
SU_NAME=Eric Beser

# Email address for superuser login
SU_EMAIL=eric@agileadtesting.com

# Password for superuser account
# IMPORTANT: Change this to a secure password
SU_PASSWORD=change-this-password-in-production

# =============================================================================
# Application URL (Optional on Railway)
# =============================================================================

# Base URL for the application (used for webhook callbacks)
# The server will auto-detect in this order:
# 1. APP_URL (if set)
# 2. RAILWAY_PUBLIC_DOMAIN (auto-set by Railway)
# 3. localhost fallback for local development
#
# Only needed if you have a custom domain that differs from Railway's auto-assigned URL
# APP_URL=https://your-custom-domain.com

# =============================================================================
# Email Configuration (SMTP)
# =============================================================================

# SMTP server settings (defaults to Gmail)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587

# SMTP authentication credentials
# For Gmail: Use an App Password (not your regular password)
# Generate at: https://myaccount.google.com/apppasswords
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# From address for outgoing emails
SMTP_FROM=noreply@your-domain.com

# =============================================================================
# N8N Webhook Integration (Optional)
# =============================================================================

# N8N webhook URL for validation workflows
# Configure this in the admin settings UI, or set here for default
# N8N_WEBHOOK_URL=https://your-n8n-instance/webhook/cshse-validate

# N8N API key for authentication
# N8N_API_KEY=your-api-key

# =============================================================================
# Railway Deployment Configuration
# =============================================================================
#
# When deploying to Railway:
#
# 1. Required Variables (set in Railway dashboard):
#    - MONGODB_URI (use Railway's MongoDB plugin or Atlas)
#    - JWT_SECRET (generate secure random string)
#    - SU_NAME, SU_EMAIL, SU_PASSWORD (superuser credentials)
#    - SMTP_USER, SMTP_PASS, SMTP_FROM (for sending emails)
#
# 2. Optional Variables:
#    - SMTP_HOST, SMTP_PORT (defaults to Gmail smtp.gmail.com:587)
#    - APP_URL (only needed for custom domains; Railway's RAILWAY_PUBLIC_DOMAIN is used automatically)
#
# 3. Railway Automatic Variables:
#    - PORT is set automatically by Railway
#    - RAILWAY_PUBLIC_DOMAIN is auto-set (used for webhook callbacks)
#    - NODE_ENV should be set to "production"
#
# 5. MongoDB Setup Options:
#    a) Railway MongoDB Plugin: Add from Railway dashboard, auto-configures MONGODB_URI
#    b) MongoDB Atlas: Create free cluster and use connection string
#
# 6. CI/CD: Railway auto-deploys on push to main branch
#
# =============================================================================
